{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\nimport { Database } from '../types/supabase'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n    throw new Error('Missing Supabase environment variables. Please check your .env.local file.')\r\n}\r\n\r\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,uMAAY,EAAW,aAAa"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\n/**\n * 合併 Tailwind CSS 類名的工具函數\n * 結合 clsx 的條件類名功能與 tailwind-merge 的衝突解決\n * \n * @example\n * cn(\"px-2 py-1\", \"px-4\") // => \"py-1 px-4\"\n * cn(\"text-red-500\", isActive && \"text-blue-500\")\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/components/layout/sidebar.tsx"],"sourcesContent":["// components/layout/sidebar.tsx\n\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { supabase } from \"@/lib/supabaseClient\"\nimport { cn } from \"@/lib/utils\"\nimport type { ModuleType } from \"@/types/supabase\"\nimport {\n  LayoutDashboard,\n  BookOpen,\n  FileText,\n  BookMarked,\n  Heart,\n  CheckSquare,\n  ListTodo,\n  Calendar,\n  Dumbbell,\n  Wallet,\n  GraduationCap,\n  Settings,\n  ChevronDown,\n  FileQuestion,\n  XCircle,\n  Lightbulb,\n} from \"lucide-react\"\n\n// 導航項目定義\ninterface NavItem {\n  title: string\n  href: string\n  icon: React.ComponentType<{ className?: string }>\n  module?: ModuleType\n  children?: NavItem[]\n}\n\nconst navItems: NavItem[] = [\n  {\n    title: \"總覽\",\n    href: \"/\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"日誌\",\n    href: \"/journal\",\n    icon: BookOpen,\n    module: \"journal\",\n    children: [\n      { title: \"生活日誌\", href: \"/journal/life\", icon: FileText },\n      { title: \"學習日誌\", href: \"/journal/learning\", icon: BookMarked },\n      { title: \"閱讀日誌\", href: \"/journal/reading\", icon: BookOpen },\n      { title: \"感恩日誌\", href: \"/journal/gratitude\", icon: Heart },\n    ],\n  },\n  {\n    title: \"習慣打卡\",\n    href: \"/habits\",\n    icon: CheckSquare,\n    module: \"habits\",\n  },\n  {\n    title: \"任務\",\n    href: \"/tasks\",\n    icon: ListTodo,\n    module: \"tasks\",\n  },\n  {\n    title: \"課表\",\n    href: \"/schedule\",\n    icon: Calendar,\n    module: \"schedule\",\n  },\n  {\n    title: \"學習系統\",\n    href: \"/dashboard\",\n    icon: GraduationCap,\n    module: \"study\",\n    children: [\n      { title: \"科目管理\", href: \"/dashboard/subjects\", icon: BookOpen },\n      { title: \"題庫練習\", href: \"/dashboard/practice\", icon: FileQuestion },\n      { title: \"錯題本\", href: \"/dashboard/mistakes\", icon: XCircle },\n      { title: \"記憶卡片\", href: \"/dashboard/flashcards\", icon: Lightbulb },\n    ],\n  },\n  {\n    title: \"健康記錄\",\n    href: \"/health\",\n    icon: Dumbbell,\n    module: \"health\",\n  },\n  {\n    title: \"收支記錄\",\n    href: \"/finance\",\n    icon: Wallet,\n    module: \"finance\",\n  },\n  {\n    title: \"設定\",\n    href: \"/settings\",\n    icon: Settings,\n  },\n]\n\nexport function Sidebar() {\n  const pathname = usePathname()\n  const [enabledModules, setEnabledModules] = useState<ModuleType[]>([])\n  const [expandedItems, setExpandedItems] = useState<string[]>([])\n  const [loading, setLoading] = useState(true)\n\n  // 載入用戶啟用的模組\n  useEffect(() => {\n    const loadEnabledModules = async () => {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) {\n        setLoading(false)\n        return\n      }\n\n      const { data: profile } = await supabase\n        .from(\"profiles\")\n        .select(\"enabled_modules\")\n        .eq(\"id\", user.id)\n        .single()\n\n      if (profile?.enabled_modules) {\n        setEnabledModules(profile.enabled_modules as ModuleType[])\n      }\n      setLoading(false)\n    }\n\n    loadEnabledModules()\n  }, [])\n\n  // 根據當前路徑自動展開對應的父項目\n  useEffect(() => {\n    navItems.forEach((item) => {\n      if (item.children) {\n        const isChildActive = item.children.some((child) =>\n          pathname.startsWith(child.href)\n        )\n        if (isChildActive && !expandedItems.includes(item.href)) {\n          setExpandedItems((prev) => [...prev, item.href])\n        }\n      }\n    })\n  }, [pathname])\n\n  // 切換展開狀態\n  const toggleExpand = (href: string) => {\n    setExpandedItems((prev) =>\n      prev.includes(href)\n        ? prev.filter((item) => item !== href)\n        : [...prev, href]\n    )\n  }\n\n  // 過濾出用戶啟用的模組\n  const filteredNavItems = navItems.filter((item) => {\n    if (!item.module) return true\n    return enabledModules.includes(item.module)\n  })\n\n  // 判斷是否為當前路徑\n  const isActive = (href: string) => {\n    if (href === \"/\") return pathname === \"/\"\n    return pathname === href || pathname.startsWith(href + \"/\")\n  }\n\n  return (\n    <aside className=\"hidden md:flex md:flex-col md:w-64 md:fixed md:inset-y-0 bg-white border-r\">\n      {/* Logo */}\n      <div className=\"flex items-center h-16 px-6 border-b\">\n        <BookOpen className=\"w-8 h-8 text-blue-600\" />\n        <span className=\"ml-3 text-xl font-bold text-gray-800\">學習平台</span>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 px-4 py-6 space-y-1 overflow-y-auto\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : (\n          filteredNavItems.map((item) => {\n            const active = isActive(item.href)\n            const expanded = expandedItems.includes(item.href)\n            const hasChildren = item.children && item.children.length > 0\n\n            return (\n              <div key={item.href}>\n                {hasChildren ? (\n                  <button\n                    onClick={() => toggleExpand(item.href)}\n                    className={cn(\n                      \"flex items-center justify-between w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors\",\n                      active\n                        ? \"bg-blue-50 text-blue-700\"\n                        : \"text-gray-600 hover:bg-gray-100 hover:text-gray-900\"\n                    )}\n                  >\n                    <div className=\"flex items-center\">\n                      <item.icon\n                        className={cn(\n                          \"w-5 h-5 mr-3\",\n                          active ? \"text-blue-700\" : \"text-gray-400\"\n                        )}\n                      />\n                      {item.title}\n                    </div>\n                    <ChevronDown\n                      className={cn(\n                        \"w-4 h-4 transition-transform\",\n                        expanded ? \"rotate-180\" : \"\"\n                      )}\n                    />\n                  </button>\n                ) : (\n                  <Link\n                    href={item.href}\n                    className={cn(\n                      \"flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors\",\n                      active\n                        ? \"bg-blue-50 text-blue-700\"\n                        : \"text-gray-600 hover:bg-gray-100 hover:text-gray-900\"\n                    )}\n                  >\n                    <item.icon\n                      className={cn(\n                        \"w-5 h-5 mr-3\",\n                        active ? \"text-blue-700\" : \"text-gray-400\"\n                      )}\n                    />\n                    {item.title}\n                  </Link>\n                )}\n\n                {/* 子選單 */}\n                {hasChildren && expanded && (\n                  <div className=\"mt-1 ml-4 space-y-1\">\n                    {item.children!.map((child) => {\n                      const childActive = isActive(child.href)\n                      return (\n                        <Link\n                          key={child.href}\n                          href={child.href}\n                          className={cn(\n                            \"flex items-center px-4 py-2 text-sm rounded-lg transition-colors\",\n                            childActive\n                              ? \"bg-blue-50 text-blue-700 font-medium\"\n                              : \"text-gray-500 hover:bg-gray-100 hover:text-gray-700\"\n                          )}\n                        >\n                          <child.icon\n                            className={cn(\n                              \"w-4 h-4 mr-3\",\n                              childActive ? \"text-blue-700\" : \"text-gray-400\"\n                            )}\n                          />\n                          {child.title}\n                        </Link>\n                      )\n                    })}\n                  </div>\n                )}\n              </div>\n            )\n          })\n        )}\n      </nav>\n    </aside>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 395, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/components/layout/bottom-nav.tsx"],"sourcesContent":["// components/layout/bottom-nav.tsx\n\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { supabase } from \"@/lib/supabaseClient\"\nimport { cn } from \"@/lib/utils\"\nimport type { ModuleType } from \"@/types/supabase\"\nimport {\n  LayoutDashboard,\n  BookOpen,\n  CheckSquare,\n  ListTodo,\n  Calendar,\n  GraduationCap,\n  MoreHorizontal,\n  Dumbbell,\n  Wallet,\n  Settings,\n} from \"lucide-react\"\n\ninterface NavItem {\n  title: string\n  href: string\n  icon: React.ComponentType<{ className?: string }>\n  module?: ModuleType\n  priority: number // 數字越小優先級越高\n}\n\nconst allNavItems: NavItem[] = [\n  { title: \"總覽\", href: \"/\", icon: LayoutDashboard, priority: 0 },\n  { title: \"日誌\", href: \"/journal\", icon: BookOpen, module: \"journal\", priority: 1 },\n  { title: \"習慣\", href: \"/habits\", icon: CheckSquare, module: \"habits\", priority: 2 },\n  { title: \"任務\", href: \"/tasks\", icon: ListTodo, module: \"tasks\", priority: 3 },\n  { title: \"課表\", href: \"/schedule\", icon: Calendar, module: \"schedule\", priority: 4 },\n  { title: \"學習\", href: \"/dashboard\", icon: GraduationCap, module: \"study\", priority: 5 },\n  { title: \"健康\", href: \"/health\", icon: Dumbbell, module: \"health\", priority: 6 },\n  { title: \"收支\", href: \"/finance\", icon: Wallet, module: \"finance\", priority: 7 },\n  { title: \"設定\", href: \"/settings\", icon: Settings, priority: 8 },\n]\n\nconst MAX_VISIBLE_ITEMS = 5\n\nexport function BottomNav() {\n  const pathname = usePathname()\n  const [enabledModules, setEnabledModules] = useState<ModuleType[]>([])\n  const [showMore, setShowMore] = useState(false)\n\n  // 載入用戶啟用的模組\n  useEffect(() => {\n    const loadEnabledModules = async () => {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) return\n\n      const { data: profile } = await supabase\n        .from(\"profiles\")\n        .select(\"enabled_modules\")\n        .eq(\"id\", user.id)\n        .single()\n\n      if (profile?.enabled_modules) {\n        setEnabledModules(profile.enabled_modules as ModuleType[])\n      }\n    }\n\n    loadEnabledModules()\n  }, [])\n\n  // 過濾並排序導航項目\n  const filteredItems = allNavItems\n    .filter((item) => {\n      if (!item.module) return true\n      return enabledModules.includes(item.module)\n    })\n    .sort((a, b) => a.priority - b.priority)\n\n  // 分割為可見項目和更多選單項目\n  const needsMoreMenu = filteredItems.length > MAX_VISIBLE_ITEMS\n  const visibleItems = needsMoreMenu\n    ? filteredItems.slice(0, MAX_VISIBLE_ITEMS - 1)\n    : filteredItems\n  const moreItems = needsMoreMenu\n    ? filteredItems.slice(MAX_VISIBLE_ITEMS - 1)\n    : []\n\n  // 判斷是否為當前路徑\n  const isActive = (href: string) => {\n    if (href === \"/\") return pathname === \"/\"\n    return pathname === href || pathname.startsWith(href + \"/\")\n  }\n\n  // 判斷更多選單中是否有當前項目\n  const isMoreActive = moreItems.some((item) => isActive(item.href))\n\n  return (\n    <>\n      {/* 更多選單彈出層 */}\n      {showMore && (\n        <>\n          <div\n            className=\"fixed inset-0 bg-black/20 z-40\"\n            onClick={() => setShowMore(false)}\n          />\n          <div className=\"fixed bottom-16 left-0 right-0 bg-white border-t rounded-t-xl shadow-lg z-50 p-4\">\n            <div className=\"grid grid-cols-4 gap-4\">\n              {moreItems.map((item) => {\n                const active = isActive(item.href)\n                return (\n                  <Link\n                    key={item.href}\n                    href={item.href}\n                    onClick={() => setShowMore(false)}\n                    className={cn(\n                      \"flex flex-col items-center justify-center p-3 rounded-lg transition-colors\",\n                      active\n                        ? \"bg-blue-50 text-blue-600\"\n                        : \"text-gray-500 hover:bg-gray-100\"\n                    )}\n                  >\n                    <item.icon className=\"w-6 h-6\" />\n                    <span className=\"mt-1 text-xs\">{item.title}</span>\n                  </Link>\n                )\n              })}\n            </div>\n          </div>\n        </>\n      )}\n\n      {/* 底部導航列 */}\n      <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t z-50\">\n        <div className=\"flex items-center justify-around h-16\">\n          {visibleItems.map((item) => {\n            const active = isActive(item.href)\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={cn(\n                  \"flex flex-col items-center justify-center flex-1 h-full transition-colors\",\n                  active\n                    ? \"text-blue-600\"\n                    : \"text-gray-500 hover:text-gray-700\"\n                )}\n              >\n                <item.icon className=\"w-5 h-5\" />\n                <span className=\"mt-1 text-xs\">{item.title}</span>\n              </Link>\n            )\n          })}\n\n          {/* 更多按鈕 */}\n          {needsMoreMenu && (\n            <button\n              onClick={() => setShowMore(!showMore)}\n              className={cn(\n                \"flex flex-col items-center justify-center flex-1 h-full transition-colors\",\n                isMoreActive || showMore\n                  ? \"text-blue-600\"\n                  : \"text-gray-500 hover:text-gray-700\"\n              )}\n            >\n              <MoreHorizontal className=\"w-5 h-5\" />\n              <span className=\"mt-1 text-xs\">更多</span>\n            </button>\n          )}\n        </div>\n      </nav>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 653, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/components/ui/button.tsx"],"sourcesContent":["//components/ui/button.tsx\r\nimport * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n                destructive:\r\n                    \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n                outline:\r\n                    \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n                secondary:\r\n                    \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n                link: \"text-primary underline-offset-4 hover:underline\",\r\n            },\r\n            size: {\r\n                default: \"h-10 px-4 py-2\",\r\n                sm: \"h-9 rounded-md px-3\",\r\n                lg: \"h-11 rounded-md px-8\",\r\n                icon: \"h-10 w-10\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n)\r\n\r\nexport interface ButtonProps\r\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n    asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n        const Comp = asChild ? Slot : \"button\"\r\n        return (\r\n            <Comp\r\n                className={cn(buttonVariants({ variant, size, className }))}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;;;AAC1B;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACtB,0RACA;IACI,UAAU;QACN,SAAS;YACL,SAAS;YACT,aACI;YACJ,SACI;YACJ,WACI;YACJ,OAAO;YACP,MAAM;QACV;QACA,MAAM;YACF,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACV;IACJ;IACA,iBAAiB;QACb,SAAS;QACT,MAAM;IACV;AACJ;AASJ,MAAM,uBAAS,mNAAgB,CAC3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACtD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACI,8OAAC;QACG,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 714, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/components/layout/header.tsx"],"sourcesContent":["// components/layout/header.tsx\n\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { supabase } from \"@/lib/supabaseClient\"\nimport { Button } from \"@/components/ui/button\"\nimport { LogOut, User } from \"lucide-react\"\nimport type { User as SupabaseUser } from \"@supabase/supabase-js\"\n\nexport function Header() {\n  const router = useRouter()\n  const [user, setUser] = useState<SupabaseUser | null>(null)\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const getUser = async () => {\n      const { data: { user } } = await supabase.auth.getUser()\n      setUser(user)\n    }\n    getUser()\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (_event, session) => {\n        setUser(session?.user ?? null)\n      }\n    )\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  const handleLogout = async () => {\n    setLoading(true)\n    await supabase.auth.signOut()\n    router.push(\"/login\")\n  }\n\n  const displayName = user?.user_metadata?.full_name || user?.email || \"使用者\"\n\n  return (\n    <header className=\"sticky top-0 z-40 bg-white border-b\">\n      <div className=\"flex items-center justify-between h-16 px-4 md:px-6\">\n        {/* 手機版 Logo */}\n        <div className=\"flex items-center md:hidden\">\n          <span className=\"text-lg font-bold text-gray-800\">學習平台</span>\n        </div>\n\n        {/* 桌面版留空 */}\n        <div className=\"hidden md:block\" />\n\n        {/* 用戶資訊 */}\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n            <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n              <User className=\"w-4 h-4 text-blue-600\" />\n            </div>\n            <span className=\"hidden sm:inline\">{displayName}</span>\n          </div>\n\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleLogout}\n            disabled={loading}\n            className=\"text-gray-600 hover:text-gray-900\"\n          >\n            <LogOut className=\"w-4 h-4 mr-2\" />\n            <span className=\"hidden sm:inline\">登出</span>\n          </Button>\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAG/B;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AASO,SAAS;IACd,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAsB;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU;YACd,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,QAAQ;QACV;QACA;QAEA,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,iIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAChE,CAAC,QAAQ;YACP,QAAQ,SAAS,QAAQ;QAC3B;QAGF,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,WAAW;QACX,MAAM,iIAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,cAAc,MAAM,eAAe,aAAa,MAAM,SAAS;IAErE,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAK,WAAU;kCAAkC;;;;;;;;;;;8BAIpD,8OAAC;oBAAI,WAAU;;;;;;8BAGf,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,0MAAI;wCAAC,WAAU;;;;;;;;;;;8CAElB,8OAAC;oCAAK,WAAU;8CAAoB;;;;;;;;;;;;sCAGtC,8OAAC,qIAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;;8CAEV,8OAAC,oNAAM;oCAAC,WAAU;;;;;;8CAClB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM/C"}},
    {"offset": {"line": 865, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Self_Learningv1/app/%28dashboard%29/layout.tsx"],"sourcesContent":["// app/(dashboard)/layout.tsx\n\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { supabase } from \"@/lib/supabaseClient\"\nimport { Sidebar } from \"@/components/layout/sidebar\"\nimport { BottomNav } from \"@/components/layout/bottom-nav\"\nimport { Header } from \"@/components/layout/header\"\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const router = useRouter()\n  const [loading, setLoading] = useState(true)\n  const [authenticated, setAuthenticated] = useState(false)\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      const { data: { session } } = await supabase.auth.getSession()\n      \n      if (!session) {\n        router.push(\"/login\")\n      } else {\n        setAuthenticated(true)\n      }\n      setLoading(false)\n    }\n\n    checkAuth()\n\n    // 監聽認證狀態變化\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (event, session) => {\n        if (event === \"SIGNED_OUT\") {\n          router.push(\"/login\")\n        }\n      }\n    )\n\n    return () => subscription.unsubscribe()\n  }, [router])\n\n  // 載入中顯示\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"flex flex-col items-center gap-4\">\n          <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\" />\n          <p className=\"text-gray-600\">載入中...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // 未認證不顯示內容\n  if (!authenticated) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* 側邊欄（桌面版） */}\n      <Sidebar />\n\n      {/* 主內容區 */}\n      <div className=\"md:pl-64\">\n        {/* 頂部導航 */}\n        <Header />\n\n        {/* 頁面內容 */}\n        <main className=\"p-4 md:p-6 pb-20 md:pb-6\">\n          {children}\n        </main>\n      </div>\n\n      {/* 底部導航（手機版） */}\n      <BottomNav />\n    </div>\n  )\n}\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;AAG7B;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IAEnD,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,UAAU;YAE5D,IAAI,CAAC,SAAS;gBACZ,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,iBAAiB;YACnB;YACA,WAAW;QACb;QAEA;QAEA,WAAW;QACX,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,iIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAChE,CAAC,OAAO;YACN,IAAI,UAAU,cAAc;gBAC1B,OAAO,IAAI,CAAC;YACd;QACF;QAGF,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG;QAAC;KAAO;IAEX,QAAQ;IACR,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAIrC;IAEA,WAAW;IACX,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC,2IAAO;;;;;0BAGR,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,yIAAM;;;;;kCAGP,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;0BAKL,8OAAC,mJAAS;;;;;;;;;;;AAGhB"}}]
}